Building DAG of jobs...
Using shell: /home/fauverlab/.nextstrain/runtimes/conda/env/bin/bash
Provided cores: 16
Rules claiming more threads will be scaled down.
Job stats:
job                count
---------------  -------
align                  1
all                    1
ancestral              1
export                 1
filter                 1
index_sequences        1
refine                 1
traits                 1
translate              1
tree                   1
total                 10

Select jobs to execute...

[Thu Dec 19 13:53:04 2024]
Job 6: 
        Creating an index of sequence composition for filtering.
        
Reason: Missing output files: results/sequence_index.tsv


        augur index             --sequences data/sequences.fasta             --output results/sequence_index.tsv
        
[Thu Dec 19 13:53:05 2024]
Finished job 6.
1 of 10 steps (10%) done
Select jobs to execute...

[Thu Dec 19 13:53:05 2024]
Job 5: 
        Filtering to
          - 20 sequence(s) per country year month
          - from 1999 onwards
          - excluding strains in config/dropped_strains.txt
        
Reason: Missing output files: results/filtered.fasta; Input files updated by another job: results/sequence_index.tsv


        augur filter             --sequences data/sequences.fasta             --sequence-index results/sequence_index.tsv             --metadata data/metadata.tsv             --exclude config/dropped_strains.txt             --output results/filtered.fasta             --group-by country year month             --sequences-per-group 20             --min-date 1999
        
[Thu Dec 19 13:53:05 2024]
Finished job 5.
2 of 10 steps (20%) done
Select jobs to execute...

[Thu Dec 19 13:53:05 2024]
Job 4: 
        Aligning sequences to config/WNV_reference.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned.fasta; Input files updated by another job: results/filtered.fasta


        augur align             --sequences results/filtered.fasta             --reference-sequence config/WNV_reference.gb             --output results/aligned.fasta             --fill-gaps
        
[Thu Dec 19 13:53:06 2024]
Finished job 4.
3 of 10 steps (30%) done
Select jobs to execute...

[Thu Dec 19 13:53:06 2024]
Job 3: Building tree
Reason: Missing output files: results/tree_raw.nwk; Input files updated by another job: results/aligned.fasta


        augur tree             --alignment results/aligned.fasta             --output results/tree_raw.nwk
        
[Thu Dec 19 13:53:08 2024]
Finished job 3.
4 of 10 steps (40%) done
Select jobs to execute...

[Thu Dec 19 13:53:08 2024]
Job 2: 
        Refining tree
          - estimate timetree
          - use opt coalescent timescale
          - estimate marginal node dates
          - filter tips more than 4 IQDs from clock expectation
        
Reason: Missing output files: results/branch_lengths.json, results/tree.nwk; Input files updated by another job: results/aligned.fasta, results/tree_raw.nwk


        augur refine             --tree results/tree_raw.nwk             --alignment results/aligned.fasta             --metadata data/metadata.tsv             --output-tree results/tree.nwk             --output-node-data results/branch_lengths.json             --timetree             --coalescent opt             --date-confidence             --date-inference marginal             --clock-filter-iqd 4
        
[Thu Dec 19 13:53:12 2024]
Finished job 2.
5 of 10 steps (50%) done
Select jobs to execute...

[Thu Dec 19 13:53:12 2024]
Job 8: Reconstructing ancestral sequences and mutations
Reason: Missing output files: results/nt_muts.json; Input files updated by another job: results/aligned.fasta, results/tree.nwk


        augur ancestral             --tree results/tree.nwk             --alignment results/aligned.fasta             --output-node-data results/nt_muts.json             --inference joint
        

[Thu Dec 19 13:53:12 2024]
Job 7: Inferring ancestral traits for region country
Reason: Missing output files: results/traits.json; Input files updated by another job: results/tree.nwk


        augur traits             --tree results/tree.nwk             --metadata data/metadata.tsv             --output-node-data results/traits.json             --columns region country             --confidence
        
[Thu Dec 19 13:53:12 2024]
Finished job 7.
6 of 10 steps (60%) done
[Thu Dec 19 13:53:12 2024]
Finished job 8.
7 of 10 steps (70%) done
Select jobs to execute...

[Thu Dec 19 13:53:12 2024]
Job 9: Translating amino acid sequences
Reason: Missing output files: results/aa_muts.json; Input files updated by another job: results/tree.nwk, results/nt_muts.json


        augur translate             --tree results/tree.nwk             --ancestral-sequences results/nt_muts.json             --reference-sequence config/WNV_reference.gb             --output-node-data results/aa_muts.json         
[Thu Dec 19 13:53:13 2024]
Finished job 9.
8 of 10 steps (80%) done
Select jobs to execute...

[Thu Dec 19 13:53:13 2024]
Job 1: Exporting data files for for auspice
Reason: Missing output files: auspice/WNV_NA.json; Input files updated by another job: results/traits.json, results/branch_lengths.json, results/aa_muts.json, results/tree.nwk, results/nt_muts.json


        augur export v2             --tree results/tree.nwk             --metadata data/metadata.tsv             --node-data results/branch_lengths.json results/traits.json results/nt_muts.json results/aa_muts.json             --colors config/colors.tsv             --lat-longs config/lat_longs.tsv             --auspice-config config/auspice_config.json             --include-root-sequence             --output auspice/WNV_NA.json
        
[Thu Dec 19 13:53:13 2024]
Finished job 1.
9 of 10 steps (90%) done
Select jobs to execute...

[Thu Dec 19 13:53:13 2024]
localrule all:
    input: auspice/WNV_NA.json
    jobid: 0
    reason: Input files updated by another job: auspice/WNV_NA.json
    resources: tmpdir=/tmp

[Thu Dec 19 13:53:13 2024]
Finished job 0.
10 of 10 steps (100%) done
Complete log: .snakemake/log/2024-12-19T135303.810443.snakemake.log
